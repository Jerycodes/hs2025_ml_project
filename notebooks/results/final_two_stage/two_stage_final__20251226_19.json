{
  "config": {
    "exp_id": "20251226_19",
    "price_source": "mt5_h1",
    "drop_weekends": true,
    "horizon_days": 7,
    "up_threshold": 0.012,
    "down_threshold": -0.012,
    "strict_monotonic": false,
    "max_adverse_move_pct": 0.01,
    "hit_within_horizon": true,
    "first_hit_wins": true,
    "dataset_path": "data/processed/datasets/eurusd_price_training__20251226_19.csv",
    "feature_cols": [
      "intraday_range_pct",
      "upper_shadow",
      "lower_shadow",
      "price_close_ret_1d",
      "price_close_ret_5d",
      "price_range_pct_5d_std",
      "price_body_pct_5d_mean",
      "price_close_ret_30d",
      "price_range_pct_30d_std",
      "price_body_pct_30d_mean",
      "month",
      "quarter",
      "cal_dow",
      "cal_day_of_month",
      "cal_is_monday",
      "cal_is_friday",
      "cal_is_month_start",
      "cal_is_month_end",
      "hol_is_us_federal_holiday",
      "hol_is_day_before_us_federal_holiday",
      "hol_is_day_after_us_federal_holiday",
      "h1_ret_std",
      "h1_ret_sum_abs",
      "h1_range_pct_mean",
      "h1_range_pct_max",
      "h1_close_open_pct",
      "h1_up_hours_frac",
      "h1_down_hours_frac",
      "h1_tick_volume_sum",
      "h1_spread_mean"
    ],
    "test_start": "2025-01-01",
    "train_frac_within_pretest": 0.7,
    "use_validation": true,
    "tune_thresholds_on": "val",
    "signal_threshold": 0.5,
    "signal_threshold_trade": 0.45,
    "direction_threshold": 0.52,
    "direction_threshold_down": 0.527605414390564,
    "direction_threshold_up": 0.527605414390564,
    "allow_direction_neutral": false,
    "threshold_opt_objective": "pnl",
    "threshold_tune_split": "fixed:val",
    "use_fixed_thresholds": true,
    "fixed_signal_trade_threshold": 0.45,
    "fixed_dir_threshold": 0.5,
    "fixed_dir_threshold_down": 0.48,
    "fixed_dir_threshold_up": 0.52,
    "trade_profile": "more_trades",
    "auto_fixed_dir_thresholds": true,
    "fixed_dir_q_down": 0.25,
    "fixed_dir_q_up": 0.75,
    "min_dir_gap": 0.01,
    "target_trade_rate": null,
    "trade_rate_penalty": 0.0,
    "train_multiclass_baseline": true,
    "signal_xgb_params": {
      "max_depth": 2,
      "min_child_weight": 5,
      "subsample": 0.8,
      "colsample_bytree": 0.8,
      "reg_lambda": 2.0
    },
    "direction_xgb_params": {
      "max_depth": 2,
      "min_child_weight": 5,
      "subsample": 0.8,
      "colsample_bytree": 0.8,
      "reg_lambda": 2.0
    },
    "feature_mode": "price_only"
  },
  "model_params": {
    "signal": {
      "objective": "binary:logistic",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.8,
      "device": null,
      "eval_metric": "logloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 2,
      "max_leaves": null,
      "min_child_weight": 5,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": 2.0,
      "sampling_method": null,
      "scale_pos_weight": 1.0,
      "subsample": 0.8,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "feature_importances_": [
        0.029154254123568535,
        0.043155934661626816,
        0.036254800856113434,
        0.054884959012269974,
        0.035110823810100555,
        0.09583619236946106,
        0.03669815510511398,
        0.05037736892700195,
        0.10626532882452011,
        0.03957747668027878,
        0.05496728792786598,
        0.0,
        0.0,
        0.019506949931383133,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.06991319358348846,
        0.0,
        0.09154832363128662,
        0.026119772344827652,
        0.037074338644742966,
        0.035993147641420364,
        0.03188454359769821,
        0.05352247133851051,
        0.052154649049043655
      ]
    },
    "direction": {
      "objective": "binary:logistic",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.8,
      "device": null,
      "eval_metric": "logloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 2,
      "max_leaves": null,
      "min_child_weight": 5,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": 2.0,
      "sampling_method": null,
      "scale_pos_weight": 1.0,
      "subsample": 0.8,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "feature_importances_": [
        0.0,
        0.029906515032052994,
        0.046091560274362564,
        0.0496043786406517,
        0.04744022339582443,
        0.04902090132236481,
        0.060536373406648636,
        0.04865533113479614,
        0.05680107697844505,
        0.04490545392036438,
        0.037933386862277985,
        0.0,
        0.0,
        0.0551842525601387,
        0.0,
        0.0,
        0.0,
        0.0,
        0.02829357422888279,
        0.0,
        0.0,
        0.042367808520793915,
        0.051606129854917526,
        0.05340723693370819,
        0.0520704910159111,
        0.040697891265153885,
        0.04069133475422859,
        0.0371650829911232,
        0.07047883421182632,
        0.057142212986946106
      ]
    },
    "multiclass": {
      "objective": "multi:softprob",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.9,
      "device": null,
      "eval_metric": "mlogloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 3,
      "max_leaves": null,
      "min_child_weight": null,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": null,
      "sampling_method": null,
      "scale_pos_weight": null,
      "subsample": 0.9,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "num_class": 3,
      "feature_importances_": [
        0.030625449493527412,
        0.03603684902191162,
        0.03696919232606888,
        0.03271358832716942,
        0.04060171917080879,
        0.06906070560216904,
        0.043822482228279114,
        0.052731480449438095,
        0.07500457763671875,
        0.043775781989097595,
        0.052604496479034424,
        0.0,
        0.017872005701065063,
        0.040143657475709915,
        0.0,
        0.0,
        0.0,
        0.0,
        0.027635546401143074,
        0.0,
        0.032521914690732956,
        0.041788287460803986,
        0.0387602224946022,
        0.06561228632926941,
        0.03702373057603836,
        0.03874710947275162,
        0.03212955221533775,
        0.031025972217321396,
        0.03832685947418213,
        0.04446660727262497
      ]
    }
  },
  "signal": {
    "train": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.6592489568845619,
          "recall": 0.5690276110444178,
          "f1-score": 0.6108247422680413,
          "support": 833.0
        },
        "move": {
          "precision": 0.6736363636363636,
          "recall": 0.7515212981744422,
          "f1-score": 0.710450623202301,
          "support": 986.0
        },
        "accuracy": 0.6679494227597581,
        "macro avg": {
          "precision": 0.6664426602604627,
          "recall": 0.66027445460943,
          "f1-score": 0.6606376827351712,
          "support": 1819.0
        },
        "weighted avg": {
          "precision": 0.6670477381145105,
          "recall": 0.6679494227597581,
          "f1-score": 0.6648275562324064,
          "support": 1819.0
        }
      },
      "confusion_matrix": [
        [
          474,
          359
        ],
        [
          245,
          741
        ]
      ]
    },
    "val": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.6313131313131313,
          "recall": 0.3561253561253561,
          "f1-score": 0.4553734061930783,
          "support": 351.0
        },
        "move": {
          "precision": 0.6116838487972509,
          "recall": 0.8298368298368298,
          "f1-score": 0.7042532146389713,
          "support": 429.0
        },
        "accuracy": 0.6166666666666667,
        "macro avg": {
          "precision": 0.6214984900551911,
          "recall": 0.592981092981093,
          "f1-score": 0.5798133104160248,
          "support": 780.0
        },
        "weighted avg": {
          "precision": 0.6205170259293971,
          "recall": 0.6166666666666667,
          "f1-score": 0.5922573008383194,
          "support": 780.0
        }
      },
      "confusion_matrix": [
        [
          125,
          226
        ],
        [
          73,
          356
        ]
      ]
    },
    "test": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.6666666666666666,
          "recall": 0.4864864864864865,
          "f1-score": 0.5625,
          "support": 111.0
        },
        "move": {
          "precision": 0.6607142857142857,
          "recall": 0.8043478260869565,
          "f1-score": 0.7254901960784313,
          "support": 138.0
        },
        "accuracy": 0.6626506024096386,
        "macro avg": {
          "precision": 0.6636904761904762,
          "recall": 0.6454171562867215,
          "f1-score": 0.6439950980392157,
          "support": 249.0
        },
        "weighted avg": {
          "precision": 0.6633677567412508,
          "recall": 0.6626506024096386,
          "f1-score": 0.6528319158988897,
          "support": 249.0
        }
      },
      "confusion_matrix": [
        [
          54,
          57
        ],
        [
          27,
          111
        ]
      ]
    }
  },
  "direction": {
    "train": {
      "threshold": 0.52,
      "report": {
        "down": {
          "precision": 0.5853131749460043,
          "recall": 0.5753715498938429,
          "f1-score": 0.5802997858672377,
          "support": 471.0
        },
        "up": {
          "precision": 0.6175908221797323,
          "recall": 0.6271844660194175,
          "f1-score": 0.6223506743737958,
          "support": 515.0
        },
        "accuracy": 0.6024340770791075,
        "macro avg": {
          "precision": 0.6014519985628684,
          "recall": 0.6012780079566302,
          "f1-score": 0.6013252301205168,
          "support": 986.0
        },
        "weighted avg": {
          "precision": 0.6021721894747769,
          "recall": 0.6024340770791075,
          "f1-score": 0.6022634852393244,
          "support": 986.0
        }
      },
      "confusion_matrix": [
        [
          271,
          200
        ],
        [
          192,
          323
        ]
      ]
    },
    "val": {
      "threshold": 0.52,
      "report": {
        "down": {
          "precision": 0.5588235294117647,
          "recall": 0.40948275862068967,
          "f1-score": 0.472636815920398,
          "support": 232.0
        },
        "up": {
          "precision": 0.47104247104247104,
          "recall": 0.6192893401015228,
          "f1-score": 0.5350877192982456,
          "support": 197.0
        },
        "accuracy": 0.5058275058275058,
        "macro avg": {
          "precision": 0.5149330002271179,
          "recall": 0.5143860493611062,
          "f1-score": 0.5038622676093218,
          "support": 429.0
        },
        "weighted avg": {
          "precision": 0.5185138126314597,
          "recall": 0.5058275058275058,
          "f1-score": 0.50131473658575,
          "support": 429.0
        }
      },
      "confusion_matrix": [
        [
          95,
          137
        ],
        [
          75,
          122
        ]
      ]
    },
    "test": {
      "threshold": 0.52,
      "report": {
        "down": {
          "precision": 0.42105263157894735,
          "recall": 0.32,
          "f1-score": 0.36363636363636365,
          "support": 50.0
        },
        "up": {
          "precision": 0.66,
          "recall": 0.75,
          "f1-score": 0.7021276595744681,
          "support": 88.0
        },
        "accuracy": 0.5942028985507246,
        "macro avg": {
          "precision": 0.5405263157894737,
          "recall": 0.535,
          "f1-score": 0.5328820116054158,
          "support": 138.0
        },
        "weighted avg": {
          "precision": 0.5734248665141114,
          "recall": 0.5942028985507246,
          "f1-score": 0.5794858856838506,
          "support": 138.0
        }
      },
      "confusion_matrix": [
        [
          16,
          34
        ],
        [
          22,
          66
        ]
      ]
    }
  },
  "combined_test": {
    "report": {
      "neutral": {
        "precision": 0.75,
        "recall": 0.32432432432432434,
        "f1-score": 0.4528301886792453,
        "support": 111.0
      },
      "up": {
        "precision": 0.0,
        "recall": 0.0,
        "f1-score": 0.0,
        "support": 88.0
      },
      "down": {
        "precision": 0.22388059701492538,
        "recall": 0.9,
        "f1-score": 0.35856573705179284,
        "support": 50.0
      },
      "accuracy": 0.3253012048192771,
      "macro avg": {
        "precision": 0.3246268656716418,
        "recall": 0.40810810810810816,
        "f1-score": 0.27046530857701273,
        "support": 249.0
      },
      "weighted avg": {
        "precision": 0.37929329257327815,
        "recall": 0.3253012048192771,
        "f1-score": 0.27386521203207176,
        "support": 249.0
      }
    },
    "confusion_matrix": [
      [
        36,
        0,
        75
      ],
      [
        7,
        0,
        81
      ],
      [
        5,
        0,
        45
      ]
    ],
    "labels": [
      "neutral",
      "up",
      "down"
    ]
  },
  "multiclass": {
    "train": {
      "report": {
        "neutral": {
          "precision": 0.656934306569343,
          "recall": 0.6482593037214885,
          "f1-score": 0.6525679758308157,
          "support": 833.0
        },
        "up": {
          "precision": 0.5077989601386482,
          "recall": 0.5689320388349515,
          "f1-score": 0.5366300366300366,
          "support": 515.0
        },
        "down": {
          "precision": 0.5404761904761904,
          "recall": 0.4819532908704883,
          "f1-score": 0.5095398428731762,
          "support": 471.0
        },
        "accuracy": 0.582737768004398,
        "macro avg": {
          "precision": 0.5684031523947272,
          "recall": 0.5663815444756427,
          "f1-score": 0.5662459517780095,
          "support": 1819.0
        },
        "weighted avg": {
          "precision": 0.5845558150401057,
          "recall": 0.582737768004398,
          "f1-score": 0.58270855344959,
          "support": 1819.0
        }
      },
      "confusion_matrix": [
        [
          540,
          198,
          95
        ],
        [
          124,
          293,
          98
        ],
        [
          158,
          86,
          227
        ]
      ]
    },
    "val": {
      "report": {
        "neutral": {
          "precision": 0.534965034965035,
          "recall": 0.4358974358974359,
          "f1-score": 0.4803767660910518,
          "support": 351.0
        },
        "up": {
          "precision": 0.2563291139240506,
          "recall": 0.41116751269035534,
          "f1-score": 0.3157894736842105,
          "support": 197.0
        },
        "down": {
          "precision": 0.3539325842696629,
          "recall": 0.27155172413793105,
          "f1-score": 0.3073170731707317,
          "support": 232.0
        },
        "accuracy": 0.38076923076923075,
        "macro avg": {
          "precision": 0.3817422443862495,
          "recall": 0.3728722242419074,
          "f1-score": 0.367827770981998,
          "support": 780.0
        },
        "weighted avg": {
          "precision": 0.41074605418759874,
          "recall": 0.38076923076923075,
          "f1-score": 0.38733375921712615,
          "support": 780.0
        }
      },
      "confusion_matrix": [
        [
          153,
          138,
          60
        ],
        [
          61,
          81,
          55
        ],
        [
          72,
          97,
          63
        ]
      ]
    },
    "test": {
      "report": {
        "neutral": {
          "precision": 0.6578947368421053,
          "recall": 0.45045045045045046,
          "f1-score": 0.5347593582887701,
          "support": 111.0
        },
        "up": {
          "precision": 0.3969465648854962,
          "recall": 0.5909090909090909,
          "f1-score": 0.4748858447488584,
          "support": 88.0
        },
        "down": {
          "precision": 0.3333333333333333,
          "recall": 0.28,
          "f1-score": 0.30434782608695654,
          "support": 50.0
        },
        "accuracy": 0.46586345381526106,
        "macro avg": {
          "precision": 0.4627248783536449,
          "recall": 0.44045318045318044,
          "f1-score": 0.43799767637486164,
          "support": 249.0
        },
        "weighted avg": {
          "precision": 0.5004991171327872,
          "recall": 0.46586345381526106,
          "f1-score": 0.467331865109642,
          "support": 249.0
        }
      },
      "confusion_matrix": [
        [
          50,
          54,
          7
        ],
        [
          15,
          52,
          21
        ],
        [
          11,
          25,
          14
        ]
      ]
    },
    "labels": [
      "neutral",
      "up",
      "down"
    ]
  }
}