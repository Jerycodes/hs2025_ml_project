{
  "config": {
    "exp_id": "hv_mt5_flex_result",
    "price_source": "mt5_h1",
    "drop_weekends": false,
    "horizon_days": 15,
    "up_threshold": 0.02,
    "down_threshold": -0.02,
    "strict_monotonic": false,
    "max_adverse_move_pct": 0.004,
    "hit_within_horizon": true,
    "first_hit_wins": true,
    "dataset_path": "data/processed/datasets/eurusd_news_training__hv_mt5_flex_result.csv",
    "feature_cols": [
      "article_count",
      "avg_polarity",
      "avg_neg",
      "avg_neu",
      "avg_pos",
      "pos_share",
      "neg_share",
      "intraday_range_pct",
      "upper_shadow",
      "lower_shadow",
      "price_close_ret_1d",
      "price_close_ret_5d",
      "price_range_pct_5d_std",
      "price_body_pct_5d_mean",
      "price_close_ret_30d",
      "price_range_pct_30d_std",
      "price_body_pct_30d_mean",
      "news_article_count_3d_sum",
      "news_article_count_7d_sum",
      "news_pos_share_5d_mean",
      "news_neg_share_5d_mean",
      "news_article_count_lag1",
      "news_pos_share_lag1",
      "news_neg_share_lag1",
      "month",
      "quarter",
      "cal_dow",
      "cal_day_of_month",
      "cal_is_monday",
      "cal_is_friday",
      "cal_is_month_start",
      "cal_is_month_end",
      "hol_is_us_federal_holiday",
      "hol_is_day_before_us_federal_holiday",
      "hol_is_day_after_us_federal_holiday",
      "h1_ret_std",
      "h1_ret_sum_abs",
      "h1_range_pct_mean",
      "h1_range_pct_max",
      "h1_close_open_pct",
      "h1_up_hours_frac",
      "h1_down_hours_frac",
      "h1_tick_volume_sum",
      "h1_spread_mean"
    ],
    "test_start": "2025-01-01",
    "train_frac_within_pretest": 0.7,
    "use_validation": true,
    "tune_thresholds_on": "val",
    "signal_threshold": 0.5,
    "signal_threshold_trade": 0.45,
    "direction_threshold": 0.5,
    "direction_threshold_down": 0.4918622374534607,
    "direction_threshold_up": 0.4918622374534607,
    "allow_direction_neutral": false,
    "threshold_opt_objective": "macro_f1",
    "threshold_tune_split": "fixed:val",
    "use_fixed_thresholds": true,
    "fixed_signal_trade_threshold": 0.45,
    "fixed_dir_threshold": 0.5,
    "fixed_dir_threshold_down": 0.48,
    "fixed_dir_threshold_up": 0.52,
    "trade_profile": "more_trades",
    "auto_fixed_dir_thresholds": true,
    "fixed_dir_q_down": 0.25,
    "fixed_dir_q_up": 0.75,
    "min_dir_gap": 0.01,
    "target_trade_rate": null,
    "trade_rate_penalty": 0.0,
    "train_multiclass_baseline": true,
    "signal_xgb_params": {
      "max_depth": 2,
      "min_child_weight": 5,
      "subsample": 0.8,
      "colsample_bytree": 0.8,
      "reg_lambda": 2.0
    },
    "direction_xgb_params": {
      "max_depth": 2,
      "min_child_weight": 5,
      "subsample": 0.8,
      "colsample_bytree": 0.8,
      "reg_lambda": 2.0
    },
    "feature_mode": "news+price"
  },
  "model_params": {
    "signal": {
      "objective": "binary:logistic",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.8,
      "device": null,
      "eval_metric": "logloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 2,
      "max_leaves": null,
      "min_child_weight": 5,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": 2.0,
      "sampling_method": null,
      "scale_pos_weight": 2.815028901734104,
      "subsample": 0.8,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "feature_importances_": [
        0.028732210397720337,
        0.033119283616542816,
        0.03345918655395508,
        0.038122765719890594,
        0.03184277564287186,
        0.0,
        0.0,
        0.049161139875650406,
        0.031402837485075,
        0.0,
        0.03438892215490341,
        0.0,
        0.04503927752375603,
        0.027165772393345833,
        0.03734321892261505,
        0.03263678774237633,
        0.04284016042947769,
        0.0,
        0.04611431807279587,
        0.0,
        0.0419892892241478,
        0.03053469955921173,
        0.029671667143702507,
        0.03784896060824394,
        0.04036113619804382,
        0.0,
        0.0,
        0.04766165465116501,
        0.0,
        0.0,
        0.0,
        0.029116034507751465,
        0.0,
        0.0,
        0.0,
        0.029187818989157677,
        0.0,
        0.05185375735163689,
        0.041442688554525375,
        0.026972828432917595,
        0.0,
        0.0,
        0.039860695600509644,
        0.04213007912039757
      ]
    },
    "direction": {
      "objective": "binary:logistic",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.8,
      "device": null,
      "eval_metric": "logloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 2,
      "max_leaves": null,
      "min_child_weight": 5,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": 2.0,
      "sampling_method": null,
      "scale_pos_weight": 1.4027777777777777,
      "subsample": 0.8,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "feature_importances_": [
        0.049378909170627594,
        0.03039655275642872,
        0.046296220272779465,
        0.04278697818517685,
        0.018115967512130737,
        0.03193393349647522,
        0.0,
        0.03931562602519989,
        0.04254520684480667,
        0.010961215943098068,
        0.028045205399394035,
        0.0,
        0.04491155967116356,
        0.0,
        0.05816090106964111,
        0.053280603140592575,
        0.06887475401163101,
        0.036269038915634155,
        0.03837816044688225,
        0.0,
        0.04351372271776199,
        0.03724682331085205,
        0.0,
        0.0,
        0.039407115429639816,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.04756156727671623,
        0.03415350615978241,
        0.05647966265678406,
        0.0,
        0.0,
        0.03581273555755615,
        0.028929324820637703,
        0.0,
        0.03724469244480133
      ]
    },
    "multiclass": {
      "objective": "multi:softprob",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.9,
      "device": null,
      "eval_metric": "mlogloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 3,
      "max_leaves": null,
      "min_child_weight": null,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": null,
      "sampling_method": null,
      "scale_pos_weight": null,
      "subsample": 0.9,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "num_class": 3,
      "feature_importances_": [
        0.026479465886950493,
        0.024616334587335587,
        0.03019675798714161,
        0.030814969912171364,
        0.021170005202293396,
        0.019944773986935616,
        0.01508114580065012,
        0.023522768169641495,
        0.02049526572227478,
        0.016030043363571167,
        0.01634770631790161,
        0.024856606498360634,
        0.0282371137291193,
        0.02597232349216938,
        0.04041331633925438,
        0.0322628952562809,
        0.03756744787096977,
        0.0252007357776165,
        0.03503204882144928,
        0.026373764500021935,
        0.042167168110609055,
        0.016430407762527466,
        0.019596094265580177,
        0.024166526272892952,
        0.03595581650733948,
        0.02661837637424469,
        0.012954570353031158,
        0.030458757653832436,
        0.019458789378404617,
        0.019464846700429916,
        0.0,
        0.0,
        0.0,
        0.0,
        0.01638333685696125,
        0.025062082335352898,
        0.020586851984262466,
        0.027142830193042755,
        0.019191799685359,
        0.022540424019098282,
        0.02141181007027626,
        0.018186436966061592,
        0.028642423450946808,
        0.03296515718102455
      ]
    }
  },
  "signal": {
    "train": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.8702702702702703,
          "recall": 0.6611909650924025,
          "f1-score": 0.751458576429405,
          "support": 487.0
        },
        "move": {
          "precision": 0.43103448275862066,
          "recall": 0.7225433526011561,
          "f1-score": 0.5399568034557235,
          "support": 173.0
        },
        "accuracy": 0.6772727272727272,
        "macro avg": {
          "precision": 0.6506523765144454,
          "recall": 0.6918671588467793,
          "f1-score": 0.6457076899425642,
          "support": 660.0
        },
        "weighted avg": {
          "precision": 0.7551372532407015,
          "recall": 0.6772727272727272,
          "f1-score": 0.6960194753317582,
          "support": 660.0
        }
      },
      "confusion_matrix": [
        [
          322,
          165
        ],
        [
          48,
          125
        ]
      ]
    },
    "val": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.8055555555555556,
          "recall": 0.4978540772532189,
          "f1-score": 0.6153846153846154,
          "support": 233.0
        },
        "move": {
          "precision": 0.16428571428571428,
          "recall": 0.45098039215686275,
          "f1-score": 0.24083769633507854,
          "support": 51.0
        },
        "accuracy": 0.4894366197183099,
        "macro avg": {
          "precision": 0.4849206349206349,
          "recall": 0.4744172347050408,
          "f1-score": 0.428111155859847,
          "support": 284.0
        },
        "weighted avg": {
          "precision": 0.6903979432148447,
          "recall": 0.4894366197183099,
          "f1-score": 0.548124429217269,
          "support": 284.0
        }
      },
      "confusion_matrix": [
        [
          116,
          117
        ],
        [
          28,
          23
        ]
      ]
    },
    "test": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.7241379310344828,
          "recall": 0.6325301204819277,
          "f1-score": 0.6752411575562701,
          "support": 166.0
        },
        "move": {
          "precision": 0.2375,
          "recall": 0.3220338983050847,
          "f1-score": 0.2733812949640288,
          "support": 59.0
        },
        "accuracy": 0.5511111111111111,
        "macro avg": {
          "precision": 0.48081896551724135,
          "recall": 0.4772820093935062,
          "f1-score": 0.47431122626014943,
          "support": 225.0
        },
        "weighted avg": {
          "precision": 0.5965306513409963,
          "recall": 0.5511111111111111,
          "f1-score": 0.5698645713654158,
          "support": 225.0
        }
      },
      "confusion_matrix": [
        [
          105,
          61
        ],
        [
          40,
          19
        ]
      ]
    }
  },
  "direction": {
    "train": {
      "threshold": 0.5,
      "report": {
        "down": {
          "precision": 0.7575757575757576,
          "recall": 0.7425742574257426,
          "f1-score": 0.75,
          "support": 101.0
        },
        "up": {
          "precision": 0.6486486486486487,
          "recall": 0.6666666666666666,
          "f1-score": 0.6575342465753424,
          "support": 72.0
        },
        "accuracy": 0.7109826589595376,
        "macro avg": {
          "precision": 0.7031122031122031,
          "recall": 0.7046204620462047,
          "f1-score": 0.7037671232876712,
          "support": 173.0
        },
        "weighted avg": {
          "precision": 0.7122419318951111,
          "recall": 0.7109826589595376,
          "f1-score": 0.7115171430833794,
          "support": 173.0
        }
      },
      "confusion_matrix": [
        [
          75,
          26
        ],
        [
          24,
          48
        ]
      ]
    },
    "val": {
      "threshold": 0.5,
      "report": {
        "down": {
          "precision": 0.5,
          "recall": 0.4,
          "f1-score": 0.4444444444444444,
          "support": 30.0
        },
        "up": {
          "precision": 0.3333333333333333,
          "recall": 0.42857142857142855,
          "f1-score": 0.375,
          "support": 21.0
        },
        "accuracy": 0.4117647058823529,
        "macro avg": {
          "precision": 0.41666666666666663,
          "recall": 0.41428571428571426,
          "f1-score": 0.4097222222222222,
          "support": 51.0
        },
        "weighted avg": {
          "precision": 0.43137254901960786,
          "recall": 0.4117647058823529,
          "f1-score": 0.41584967320261434,
          "support": 51.0
        }
      },
      "confusion_matrix": [
        [
          12,
          18
        ],
        [
          12,
          9
        ]
      ]
    },
    "test": {
      "threshold": 0.5,
      "report": {
        "down": {
          "precision": 0.23809523809523808,
          "recall": 0.2631578947368421,
          "f1-score": 0.25,
          "support": 19.0
        },
        "up": {
          "precision": 0.631578947368421,
          "recall": 0.6,
          "f1-score": 0.6153846153846154,
          "support": 40.0
        },
        "accuracy": 0.4915254237288136,
        "macro avg": {
          "precision": 0.4348370927318296,
          "recall": 0.43157894736842106,
          "f1-score": 0.4326923076923077,
          "support": 59.0
        },
        "weighted avg": {
          "precision": 0.5048638545516334,
          "recall": 0.4915254237288136,
          "f1-score": 0.4977183833116037,
          "support": 59.0
        }
      },
      "confusion_matrix": [
        [
          5,
          14
        ],
        [
          16,
          24
        ]
      ]
    }
  },
  "combined_test": {
    "report": {
      "neutral": {
        "precision": 0.7931034482758621,
        "recall": 0.13855421686746988,
        "f1-score": 0.2358974358974359,
        "support": 166.0
      },
      "up": {
        "precision": 0.1989795918367347,
        "recall": 0.975,
        "f1-score": 0.3305084745762712,
        "support": 40.0
      },
      "down": {
        "precision": 0.0,
        "recall": 0.0,
        "f1-score": 0.0,
        "support": 19.0
      },
      "accuracy": 0.27555555555555555,
      "macro avg": {
        "precision": 0.33069434670419895,
        "recall": 0.3711847389558233,
        "f1-score": 0.18880197015790237,
        "support": 225.0
      },
      "weighted avg": {
        "precision": 0.6205082492767222,
        "recall": 0.27555555555555555,
        "f1-score": 0.23279694818677865,
        "support": 225.0
      }
    },
    "confusion_matrix": [
      [
        23,
        143,
        0
      ],
      [
        1,
        39,
        0
      ],
      [
        5,
        14,
        0
      ]
    ],
    "labels": [
      "neutral",
      "up",
      "down"
    ]
  },
  "multiclass": {
    "train": {
      "report": {
        "neutral": {
          "precision": 1.0,
          "recall": 0.9917864476386037,
          "f1-score": 0.9958762886597938,
          "support": 487.0
        },
        "up": {
          "precision": 1.0,
          "recall": 1.0,
          "f1-score": 1.0,
          "support": 72.0
        },
        "down": {
          "precision": 0.9619047619047619,
          "recall": 1.0,
          "f1-score": 0.9805825242718447,
          "support": 101.0
        },
        "accuracy": 0.9939393939393939,
        "macro avg": {
          "precision": 0.9873015873015873,
          "recall": 0.9972621492128679,
          "f1-score": 0.9921529376438795,
          "support": 660.0
        },
        "weighted avg": {
          "precision": 0.9941702741702743,
          "recall": 0.9939393939393939,
          "f1-score": 0.9939857386799636,
          "support": 660.0
        }
      },
      "confusion_matrix": [
        [
          483,
          0,
          4
        ],
        [
          0,
          72,
          0
        ],
        [
          0,
          0,
          101
        ]
      ]
    },
    "val": {
      "report": {
        "neutral": {
          "precision": 0.8088888888888889,
          "recall": 0.7811158798283262,
          "f1-score": 0.7947598253275109,
          "support": 233.0
        },
        "up": {
          "precision": 0.029411764705882353,
          "recall": 0.047619047619047616,
          "f1-score": 0.03636363636363636,
          "support": 21.0
        },
        "down": {
          "precision": 0.08,
          "recall": 0.06666666666666667,
          "f1-score": 0.07272727272727272,
          "support": 30.0
        },
        "accuracy": 0.6514084507042254,
        "macro avg": {
          "precision": 0.30610021786492375,
          "recall": 0.2984671980380135,
          "f1-score": 0.3012835781394733,
          "support": 284.0
        },
        "weighted avg": {
          "precision": 0.6742561907392065,
          "recall": 0.6514084507042254,
          "f1-score": 0.6624101896012837,
          "support": 284.0
        }
      },
      "confusion_matrix": [
        [
          182,
          31,
          20
        ],
        [
          17,
          1,
          3
        ],
        [
          26,
          2,
          2
        ]
      ]
    },
    "test": {
      "report": {
        "neutral": {
          "precision": 0.7376237623762376,
          "recall": 0.8975903614457831,
          "f1-score": 0.8097826086956522,
          "support": 166.0
        },
        "up": {
          "precision": 0.17391304347826086,
          "recall": 0.1,
          "f1-score": 0.12698412698412698,
          "support": 40.0
        },
        "down": {
          "precision": 0.0,
          "recall": 0.0,
          "f1-score": 0.0,
          "support": 19.0
        },
        "accuracy": 0.68,
        "macro avg": {
          "precision": 0.3038456019514995,
          "recall": 0.3325301204819277,
          "f1-score": 0.3122555785599264,
          "support": 225.0
        },
        "weighted avg": {
          "precision": 0.5751202946381594,
          "recall": 0.68,
          "f1-score": 0.6200145694348594,
          "support": 225.0
        }
      },
      "confusion_matrix": [
        [
          149,
          17,
          0
        ],
        [
          36,
          4,
          0
        ],
        [
          17,
          2,
          0
        ]
      ]
    },
    "labels": [
      "neutral",
      "up",
      "down"
    ]
  }
}