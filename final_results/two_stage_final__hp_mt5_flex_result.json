{
  "config": {
    "exp_id": "hp_mt5_flex_result",
    "price_source": "mt5_h1",
    "drop_weekends": false,
    "horizon_days": 15,
    "up_threshold": 0.02,
    "down_threshold": -0.02,
    "strict_monotonic": false,
    "max_adverse_move_pct": 0.004,
    "hit_within_horizon": true,
    "first_hit_wins": true,
    "dataset_path": "data/processed/datasets/eurusd_price_training__hp_mt5_flex_result.csv",
    "feature_cols": [
      "intraday_range_pct",
      "upper_shadow",
      "lower_shadow",
      "price_close_ret_1d",
      "price_close_ret_5d",
      "price_range_pct_5d_std",
      "price_body_pct_5d_mean",
      "price_close_ret_30d",
      "price_range_pct_30d_std",
      "price_body_pct_30d_mean",
      "month",
      "quarter",
      "cal_dow",
      "cal_day_of_month",
      "cal_is_monday",
      "cal_is_friday",
      "cal_is_month_start",
      "cal_is_month_end",
      "hol_is_us_federal_holiday",
      "hol_is_day_before_us_federal_holiday",
      "hol_is_day_after_us_federal_holiday",
      "h1_ret_std",
      "h1_ret_sum_abs",
      "h1_range_pct_mean",
      "h1_range_pct_max",
      "h1_close_open_pct",
      "h1_up_hours_frac",
      "h1_down_hours_frac",
      "h1_tick_volume_sum",
      "h1_spread_mean"
    ],
    "test_start": "2025-01-01",
    "train_frac_within_pretest": 0.7,
    "use_validation": true,
    "tune_thresholds_on": "val",
    "signal_threshold": 0.5,
    "signal_threshold_trade": 0.45,
    "direction_threshold": 0.52,
    "direction_threshold_down": 0.5343906879425049,
    "direction_threshold_up": 0.5343906879425049,
    "allow_direction_neutral": false,
    "threshold_opt_objective": "macro_f1",
    "threshold_tune_split": "fixed:val",
    "use_fixed_thresholds": true,
    "fixed_signal_trade_threshold": 0.45,
    "fixed_dir_threshold": 0.5,
    "fixed_dir_threshold_down": 0.48,
    "fixed_dir_threshold_up": 0.52,
    "trade_profile": "more_trades",
    "auto_fixed_dir_thresholds": true,
    "fixed_dir_q_down": 0.25,
    "fixed_dir_q_up": 0.75,
    "min_dir_gap": 0.01,
    "target_trade_rate": null,
    "trade_rate_penalty": 0.0,
    "train_multiclass_baseline": true,
    "signal_xgb_params": {
      "max_depth": 2,
      "min_child_weight": 5,
      "subsample": 0.8,
      "colsample_bytree": 0.8,
      "reg_lambda": 2.0
    },
    "direction_xgb_params": {
      "max_depth": 2,
      "min_child_weight": 5,
      "subsample": 0.8,
      "colsample_bytree": 0.8,
      "reg_lambda": 2.0
    },
    "feature_mode": "price_only"
  },
  "model_params": {
    "signal": {
      "objective": "binary:logistic",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.8,
      "device": null,
      "eval_metric": "logloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 2,
      "max_leaves": null,
      "min_child_weight": 5,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": 2.0,
      "sampling_method": null,
      "scale_pos_weight": 3.2157772621809744,
      "subsample": 0.8,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "feature_importances_": [
        0.03914289548993111,
        0.03500374034047127,
        0.03383694961667061,
        0.0403238944709301,
        0.03751262649893761,
        0.038117408752441406,
        0.04530832916498184,
        0.04914601147174835,
        0.042608778923749924,
        0.04116157814860344,
        0.04923634231090546,
        0.04086380824446678,
        0.031113633885979652,
        0.03957222029566765,
        0.01966099627315998,
        0.0,
        0.0,
        0.025333276018500328,
        0.0,
        0.0,
        0.022522276267409325,
        0.04361846670508385,
        0.04493415728211403,
        0.04968484118580818,
        0.03943655267357826,
        0.03620145842432976,
        0.03742707148194313,
        0.033754948526620865,
        0.03867296874523163,
        0.04580477625131607
      ]
    },
    "direction": {
      "objective": "binary:logistic",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.8,
      "device": null,
      "eval_metric": "logloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 2,
      "max_leaves": null,
      "min_child_weight": 5,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": 2.0,
      "sampling_method": null,
      "scale_pos_weight": 0.8340425531914893,
      "subsample": 0.8,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "feature_importances_": [
        0.02757374197244644,
        0.03512987121939659,
        0.0505942739546299,
        0.042917363345623016,
        0.06673269718885422,
        0.06119447201490402,
        0.03618452325463295,
        0.06281350553035736,
        0.07496626675128937,
        0.060048602521419525,
        0.04970375448465347,
        0.0,
        0.0,
        0.054344698786735535,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.0,
        0.06401705741882324,
        0.04891500994563103,
        0.059387266635894775,
        0.03987552598118782,
        0.04111340269446373,
        0.0,
        0.0,
        0.0604407973587513,
        0.06404717266559601
      ]
    },
    "multiclass": {
      "objective": "multi:softprob",
      "base_score": null,
      "booster": null,
      "colsample_bylevel": null,
      "colsample_bynode": null,
      "colsample_bytree": 0.9,
      "device": null,
      "eval_metric": "mlogloss",
      "gamma": null,
      "grow_policy": null,
      "interaction_constraints": null,
      "learning_rate": 0.05,
      "max_bin": null,
      "max_cat_threshold": null,
      "max_cat_to_onehot": null,
      "max_delta_step": null,
      "max_depth": 3,
      "max_leaves": null,
      "min_child_weight": null,
      "monotone_constraints": null,
      "multi_strategy": null,
      "n_jobs": null,
      "num_parallel_tree": null,
      "random_state": 42,
      "reg_alpha": null,
      "reg_lambda": null,
      "sampling_method": null,
      "scale_pos_weight": null,
      "subsample": 0.9,
      "tree_method": null,
      "validate_parameters": null,
      "verbosity": null,
      "num_class": 3,
      "feature_importances_": [
        0.029855482280254364,
        0.030795274302363396,
        0.03268474340438843,
        0.03337525203824043,
        0.033353812992572784,
        0.04170658066868782,
        0.04300400987267494,
        0.04780994728207588,
        0.04969937354326248,
        0.05138778313994408,
        0.04679571092128754,
        0.031283121556043625,
        0.03001568280160427,
        0.03310614824295044,
        0.01938059739768505,
        0.011640612967312336,
        0.027662666514515877,
        0.024023788049817085,
        0.023355673998594284,
        0.014782256446778774,
        0.023010121658444405,
        0.03156420961022377,
        0.03156028315424919,
        0.04332351312041283,
        0.03645568713545799,
        0.029648365452885628,
        0.025574790313839912,
        0.032231517136096954,
        0.04698117449879646,
        0.04393187165260315
      ]
    }
  },
  "signal": {
    "train": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.9408181026979983,
          "recall": 0.7799422799422799,
          "f1-score": 0.8528599605522682,
          "support": 1386.0
        },
        "move": {
          "precision": 0.5434131736526946,
          "recall": 0.8422273781902552,
          "f1-score": 0.6606005459508644,
          "support": 431.0
        },
        "accuracy": 0.7947165657677491,
        "macro avg": {
          "precision": 0.7421156381753464,
          "recall": 0.8110848290662676,
          "f1-score": 0.7567302532515663,
          "support": 1817.0
        },
        "weighted avg": {
          "precision": 0.8465519912953974,
          "recall": 0.7947165657677491,
          "f1-score": 0.8072552232417536,
          "support": 1817.0
        }
      },
      "confusion_matrix": [
        [
          1081,
          305
        ],
        [
          68,
          363
        ]
      ]
    },
    "val": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.7495682210708118,
          "recall": 0.7331081081081081,
          "f1-score": 0.7412467976088813,
          "support": 592.0
        },
        "move": {
          "precision": 0.21393034825870647,
          "recall": 0.22872340425531915,
          "f1-score": 0.2210796915167095,
          "support": 188.0
        },
        "accuracy": 0.6115384615384616,
        "macro avg": {
          "precision": 0.48174928466475914,
          "recall": 0.4809157561817136,
          "f1-score": 0.4811632445627954,
          "support": 780.0
        },
        "weighted avg": {
          "precision": 0.6204657594186633,
          "recall": 0.6115384615384616,
          "f1-score": 0.615873187422563,
          "support": 780.0
        }
      },
      "confusion_matrix": [
        [
          434,
          158
        ],
        [
          145,
          43
        ]
      ]
    },
    "test": {
      "threshold": 0.5,
      "report": {
        "neutral": {
          "precision": 0.7341772151898734,
          "recall": 0.655367231638418,
          "f1-score": 0.6925373134328359,
          "support": 177.0
        },
        "move": {
          "precision": 0.25609756097560976,
          "recall": 0.3333333333333333,
          "f1-score": 0.2896551724137931,
          "support": 63.0
        },
        "accuracy": 0.5708333333333333,
        "macro avg": {
          "precision": 0.4951373880827416,
          "recall": 0.49435028248587565,
          "f1-score": 0.4910962429233145,
          "support": 240.0
        },
        "weighted avg": {
          "precision": 0.6086813059586292,
          "recall": 0.5708333333333333,
          "f1-score": 0.5867807514153373,
          "support": 240.0
        }
      },
      "confusion_matrix": [
        [
          116,
          61
        ],
        [
          42,
          21
        ]
      ]
    }
  },
  "direction": {
    "train": {
      "threshold": 0.52,
      "report": {
        "down": {
          "precision": 0.6944444444444444,
          "recall": 0.7653061224489796,
          "f1-score": 0.7281553398058253,
          "support": 196.0
        },
        "up": {
          "precision": 0.786046511627907,
          "recall": 0.7191489361702128,
          "f1-score": 0.7511111111111111,
          "support": 235.0
        },
        "accuracy": 0.740139211136891,
        "macro avg": {
          "precision": 0.7402454780361757,
          "recall": 0.7422275293095961,
          "f1-score": 0.7396332254584681,
          "support": 431.0
        },
        "weighted avg": {
          "precision": 0.7443898871082815,
          "recall": 0.740139211136891,
          "f1-score": 0.7406718276404938,
          "support": 431.0
        }
      },
      "confusion_matrix": [
        [
          150,
          46
        ],
        [
          66,
          169
        ]
      ]
    },
    "val": {
      "threshold": 0.52,
      "report": {
        "down": {
          "precision": 0.6533333333333333,
          "recall": 0.4666666666666667,
          "f1-score": 0.5444444444444444,
          "support": 105.0
        },
        "up": {
          "precision": 0.504424778761062,
          "recall": 0.6867469879518072,
          "f1-score": 0.5816326530612245,
          "support": 83.0
        },
        "accuracy": 0.5638297872340425,
        "macro avg": {
          "precision": 0.5788790560471977,
          "recall": 0.576706827309237,
          "f1-score": 0.5630385487528344,
          "support": 188.0
        },
        "weighted avg": {
          "precision": 0.5875917906232347,
          "recall": 0.5638297872340425,
          "f1-score": 0.5608626429295123,
          "support": 188.0
        }
      },
      "confusion_matrix": [
        [
          49,
          56
        ],
        [
          26,
          57
        ]
      ]
    },
    "test": {
      "threshold": 0.52,
      "report": {
        "down": {
          "precision": 0.2222222222222222,
          "recall": 0.21052631578947367,
          "f1-score": 0.21621621621621623,
          "support": 19.0
        },
        "up": {
          "precision": 0.6666666666666666,
          "recall": 0.6818181818181818,
          "f1-score": 0.6741573033707865,
          "support": 44.0
        },
        "accuracy": 0.5396825396825397,
        "macro avg": {
          "precision": 0.4444444444444444,
          "recall": 0.4461722488038277,
          "f1-score": 0.44518675979350136,
          "support": 63.0
        },
        "weighted avg": {
          "precision": 0.5326278659611993,
          "recall": 0.5396825396825397,
          "f1-score": 0.5360480866098842,
          "support": 63.0
        }
      },
      "confusion_matrix": [
        [
          4,
          15
        ],
        [
          14,
          30
        ]
      ]
    }
  },
  "combined_test": {
    "report": {
      "neutral": {
        "precision": 0.7008547008547008,
        "recall": 0.4632768361581921,
        "f1-score": 0.5578231292517006,
        "support": 177.0
      },
      "up": {
        "precision": 0.17857142857142858,
        "recall": 0.3409090909090909,
        "f1-score": 0.234375,
        "support": 44.0
      },
      "down": {
        "precision": 0.0,
        "recall": 0.0,
        "f1-score": 0.0,
        "support": 19.0
      },
      "accuracy": 0.4041666666666667,
      "macro avg": {
        "precision": 0.2931420431420431,
        "recall": 0.26806197568909435,
        "f1-score": 0.2640660430839002,
        "support": 240.0
      },
      "weighted avg": {
        "precision": 0.549618437118437,
        "recall": 0.4041666666666667,
        "f1-score": 0.4543633078231292,
        "support": 240.0
      }
    },
    "confusion_matrix": [
      [
        82,
        61,
        34
      ],
      [
        24,
        15,
        5
      ],
      [
        11,
        8,
        0
      ]
    ],
    "labels": [
      "neutral",
      "up",
      "down"
    ]
  },
  "multiclass": {
    "train": {
      "report": {
        "neutral": {
          "precision": 1.0,
          "recall": 0.943001443001443,
          "f1-score": 0.9706646862235425,
          "support": 1386.0
        },
        "up": {
          "precision": 0.8453237410071942,
          "recall": 1.0,
          "f1-score": 0.9161793372319688,
          "support": 235.0
        },
        "down": {
          "precision": 0.8448275862068966,
          "recall": 1.0,
          "f1-score": 0.9158878504672897,
          "support": 196.0
        },
        "accuracy": 0.9565217391304348,
        "macro avg": {
          "precision": 0.8967171090713636,
          "recall": 0.981000481000481,
          "f1-score": 0.934243957974267,
          "support": 1817.0
        },
        "weighted avg": {
          "precision": 0.9632566241239638,
          "recall": 0.9565217391304348,
          "f1-score": 0.9577090908348549,
          "support": 1817.0
        }
      },
      "confusion_matrix": [
        [
          1307,
          43,
          36
        ],
        [
          0,
          235,
          0
        ],
        [
          0,
          0,
          196
        ]
      ]
    },
    "val": {
      "report": {
        "neutral": {
          "precision": 0.7608695652173914,
          "recall": 0.8277027027027027,
          "f1-score": 0.7928802588996764,
          "support": 592.0
        },
        "up": {
          "precision": 0.17333333333333334,
          "recall": 0.1566265060240964,
          "f1-score": 0.16455696202531644,
          "support": 83.0
        },
        "down": {
          "precision": 0.21311475409836064,
          "recall": 0.12380952380952381,
          "f1-score": 0.1566265060240964,
          "support": 105.0
        },
        "accuracy": 0.6615384615384615,
        "macro avg": {
          "precision": 0.3824392175496951,
          "recall": 0.36937957751210765,
          "f1-score": 0.3713545756496964,
          "support": 780.0
        },
        "weighted avg": {
          "precision": 0.6246134595585772,
          "recall": 0.6615384615384615,
          "f1-score": 0.64037067211441,
          "support": 780.0
        }
      },
      "confusion_matrix": [
        [
          490,
          59,
          43
        ],
        [
          65,
          13,
          5
        ],
        [
          89,
          3,
          13
        ]
      ]
    },
    "test": {
      "report": {
        "neutral": {
          "precision": 0.7309644670050761,
          "recall": 0.8135593220338984,
          "f1-score": 0.7700534759358288,
          "support": 177.0
        },
        "up": {
          "precision": 0.15625,
          "recall": 0.11363636363636363,
          "f1-score": 0.13157894736842105,
          "support": 44.0
        },
        "down": {
          "precision": 0.0,
          "recall": 0.0,
          "f1-score": 0.0,
          "support": 19.0
        },
        "accuracy": 0.6208333333333333,
        "macro avg": {
          "precision": 0.2957381556683587,
          "recall": 0.309065228556754,
          "f1-score": 0.30054414110141664,
          "support": 240.0
        },
        "weighted avg": {
          "precision": 0.567732127749577,
          "recall": 0.6208333333333333,
          "f1-score": 0.5920372455202175,
          "support": 240.0
        }
      },
      "confusion_matrix": [
        [
          144,
          24,
          9
        ],
        [
          37,
          5,
          2
        ],
        [
          16,
          3,
          0
        ]
      ]
    },
    "labels": [
      "neutral",
      "up",
      "down"
    ]
  }
}